/**
 * Video Background
 * Copyright 2017 Push Labs
 * @preserve
 */
!function($){$.vidbg=function(o,e){function t(o){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(e,function(o,e,t,i){return e+e+t+t+i+i});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}var i=this;i.$el=$(o),i.el=o,i.$el.data("vidbg",i),i.init=function(){i.options=$.extend({},$.vidbg.defaultOptions,e),i.container(),i.displayPoster(),i.selfHostVideo(),i.tapToUnmute(),i.overlay()},i.isMobile=function(){return!!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)},i.container=function(){var o=i.$container=$('<div class="vidbg-container">');"static"===i.$el.css("position")&&i.$el.css("position","relative"),i.$el.css("z-index","1"),$(i.$el).prepend(o),i.$el.is("body")&&o.css({position:"fixed"})},i.overlay=function(){var o=i.$container,e=i.$overlay=$('<div class="vidbg-overlay">');!0===i.options.overlay&&e.css({background:"rgba("+t(i.options.overlayColor).r+", "+t(i.options.overlayColor).g+", "+t(i.options.overlayColor).b+", "+i.options.overlayAlpha+")"}),o.append(e)},i.tapToUnmute=function(){if(!0!==i.isMobile()&&!1!==i.options.tapToUnmute){var o=i.$tapToUnmuteButton=$('<div class="vidbg-tap-to-unmute">'+i.options.tapToUnmuteText+"</div>");o.on("click",function(o){o.preventDefault(),i.$selfHostVideo.prop("muted",!1),this.remove()}),i.$el.append(o)}},i.displayPoster=function(o){var e=i.$container;"#"!==i.options.poster&&(!0===o&&e.css("background-image","url("+i.options.poster+")"),!0===i.isMobile()?e.css("background-image","url("+i.options.poster+")"):"#"===i.options.mp4&&"#"===i.options.webm&&e.css("background-image","url("+i.options.poster+")"))},i.selfHostVideo=function(){if(!0!==i.isMobile()&&("#"!==i.options.mp4||"#"!==i.options.webm)){var o=i.$container,e=i.$selfHostVideo=$('<video playsinline><source src="'+i.options.mp4+'" type="video/mp4"><source src="'+i.options.webm+'" type="video/webm"></video>');try{e.prop({autoplay:!0,loop:i.options.repeat,volume:1,muted:i.options.mute,defaultMuted:i.options.mute,playbackRate:1,defaultPlaybackRate:1})}catch(o){console.log("error")}var t=e.get(0).play();void 0!==t&&t.then(function(){}).catch(function(o){i.displayPoster(!0)}),e.one("canplaythrough.vidbg",function(){i.resize()}),e.one("playing.vidbg",function(){e.css({opacity:1})}),o.append(e)}},i.resize=function(){if(!0!==i.isMobile()&&("#"!==i.options.mp4||"#"!==i.options.webm)){var o=i.$container,e=o.outerHeight(),t=o.outerWidth(),n;n=i.$selfHostVideo;var a,s;a=n[0].videoHeight,s=n[0].videoWidth,t/s>e/a?n.css({width:t+2,height:"auto"}):n.css({width:"auto",height:e+2})}},i.init()},$.vidbg.defaultOptions={mp4:"#",webm:"#",poster:"#",mute:!0,tapToUnmute:!1,tapToUnmuteText:"Tap to unmute",repeat:!0,overlay:!1,overlayColor:"#000",overlayAlpha:"0.3"},$.fn.vidbg=function(o){return this.each(function(){var e=new $.vidbg(this,o);$(this).data("vidbg",e),$(window).resize(function(){e.resize()})})}}(jQuery);